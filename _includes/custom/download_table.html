<script>
    /**
     * Function that tracks a click on an outbound link in Analytics.
     * This function takes a valid URL string as an argument, and uses that URL string
     * as the event label. Setting the transport method to 'beacon' lets the hit be sent
     * using 'navigator.sendBeacon' in browser that support it.
     */
var trackOutboundLink = function(url, platform, version, architecture) {
    ga('send', 'event', 'outbound', 'click', platform+' '+version+' '+architecture, {
       'transport': 'beacon',
       'hitCallback': function(){document.location = url;}
       });
}
</script>


<style>
#cell
{
    vertical-align: middle;
}
</style>




<table class="table table-bordered">
  <tr style="background-color:#c0c0c0;">
    <td class="text-center">
      <div>
        <strong>Platform</strong>
      </div>
    </td>
    <td class="text-center">
      <div>
        <strong>Architecture</strong>
       </div>
    </td>
    <td class="text-center">
      <div>
        <strong>Version</strong>
       </div>
    </td>
    <td class="text-center">
      <div>
        <strong>Size</strong>
       </div>
    </td>
  </tr>
    {% for platform in site.data.downloads.platforms %}
    {% assign versions_array = platform.versions | where: "status", include.build_status %}
    {% assign versions_array_size = versions_array | size %}
    {% if versions_array_size > 0 %}
      <tr>
        <td id="cell" rowspan="{{ versions_array_size | plus: 1}}" class="text-center">
          {{ platform.name }}
        </td>
      </tr>
      {% for build in versions_array  %}
        <tr>
          <td id="cell" class="text-center">
            {{ build.architecture }}
          </td>
          <td id="cell" class="text-center">
            {% unless build.url contains '://' %}
              {% assign build.url = build.url | prepend: site.url %}
            {% endunless %}
            <a href="{{ build.url }}" target="_blank" onclick="trackOutboundLink('{{ build.url }}', '{{ platform.name }}', '{{ build.version }}', '{{ build.architecture }}'); return false;">{{ build.version }}</a>
          </td>
          <td id="cell" class="text-center">
            {{ build.size }}
          </td>
        </tr>
      {% endfor %}
    {% endif %}
    {% endfor %}
  </tr>
</table>
